(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{177:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/spec41-9f9e5c9671f0aabedb0d2d34603e1fc9.png"},178:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/spec42-b47741decdfd2fe90528f2d6c09cbf36.png"},179:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/spec43-7f469bc9c5f1bda5e18a4b6ca4c01a60.png"},180:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/spec44-74249b4fa65778bc63ee6b00b72f03ce.png"},77:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return b}));var r=n(3),a=n(7),i=(n(0),n(97)),s=["components"],c={id:"tenure_api",title:"Tenure API"},o={unversionedId:"tenure_api",id:"tenure_api",isDocsHomePage:!1,title:"Tenure API",description:"Purpose",source:"@site/docs/tenure_api.md",slug:"/tenure_api",permalink:"/api-specifications/tenure_api",editUrl:"https://github.com/LBHackney-IT/api-specifications/edit/master/docs/tenure_api.md",version:"current",sidebar:"docs",previous:{title:"Search API",permalink:"/api-specifications/search_api"},next:{title:"Accounts API",permalink:"/api-specifications/accounts-api"}},l=[{value:"Purpose",id:"purpose",children:[]},{value:"Vision",id:"vision",children:[]},{value:"Our users and their needs",id:"our-users-and-their-needs",children:[]},{value:"Workshop",id:"workshop",children:[]},{value:"Endpoints to be created for core Tenure microservice",id:"endpoints-to-be-created-for-core-tenure-microservice",children:[]}],u={toc:l};function b(e){var t=e.components,c=Object(a.a)(e,s);return Object(i.b)("wrapper",Object(r.a)({},u,c,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"purpose"},"Purpose"),Object(i.b)("p",null,"The housing tenure describes the legal status under which people/organizations have the right to occupy their accommodation.\nIn UH we had different types of tenure such as tenancy agreements, Licences for temporary accommodation,Leasehold agreements,freehold and shared ownership. We have identified that the tenure entity is important for all processes related to most processes within the housing domain such as Manage a Tenancy,Manage arrears,service charge etc."),Object(i.b)("p",null,"As part of our solution, we are proposing to develop the first version of this service as a pilot. This will help to target services more effectively, achieve better outcomes and enhance performance monitoring while reducing cost and risk."),Object(i.b)("p",null,"Our goal is to ensure we build reusable components as part of the MTFH stream and thereby extending to other domains if they need similar information. This will enable us to eliminate the silos mechanism for asset information collection and help us to present a single view on it which will also help us to reduce the future development cost and yield a better ROI."),Object(i.b)("h2",{id:"vision"},"Vision"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"A single, centralized data source, holding all core tenure data, updated by multiple services."),Object(i.b)("li",{parentName:"ul"},"A reusable microservice API used for managing that data."),Object(i.b)("li",{parentName:"ul"},"Single data source to help us achieve consistency in data structure related to person\u2019s data and remove duplication of resident data we hold."),Object(i.b)("li",{parentName:"ul"},"Reducing development efforts.")),Object(i.b)("h2",{id:"our-users-and-their-needs"},"Our users and their needs"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a service user I need tenancy information so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I can identify the tenant living at the property to contact."),Object(i.b)("li",{parentName:"ul"},"I can identify the tenancy type to indicate the action I can take."),Object(i.b)("li",{parentName:"ul"},"I can identify from the current balance if the person is in arrears mode."),Object(i.b)("li",{parentName:"ul"},"I can identify if they have multiple accounts- dwelling,garages etc."),Object(i.b)("li",{parentName:"ul"},"I can identify if the household has any tenancy attached."),Object(i.b)("li",{parentName:"ul"},"I can see the tenancy agreements/documents attached to the tenancy."),Object(i.b)("li",{parentName:"ul"},"I can see the cautionary contact attached to the person."),Object(i.b)("li",{parentName:"ul"},"I can see if the tenancy agreement is only for a corporate account."),Object(i.b)("li",{parentName:"ul"},"I can see the tenancy start and end date of the tenancy to determine if it is current or former tenancy and accordingly take actions."),Object(i.b)("li",{parentName:"ul"},"I can see if the tenancy status is terminated or present.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a service user I need tenancy information so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I can identify the leaseholder if they reside at the same address."),Object(i.b)("li",{parentName:"ul"},"I can find if they have multiple accounts such as garages,major work,service charges etc."),Object(i.b)("li",{parentName:"ul"},"I can identify if there are any disputed balances attached to the account."),Object(i.b)("li",{parentName:"ul"},"I can identify if there is any payment arrangement in force."),Object(i.b)("li",{parentName:"ul"},"I can identify if the property has sub tenancy.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a service user I need tenancy information so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I can identify if the rent is up to date for shared ownership."),Object(i.b)("li",{parentName:"ul"},"I can identify if the service charge is up to date."),Object(i.b)("li",{parentName:"ul"},"I can identify if there is a reserve fund attached.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a consumer I need to have an API specification (e.g. Swagger doc, README), so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I can have a clear understanding of the endpoints which are available"),Object(i.b)("li",{parentName:"ul"},"I know what the requests and responses should look like"),Object(i.b)("li",{parentName:"ul"},"I need to be able to query for an individual tenure record or list of tenancies so that I can use the information as per the service needed in question.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a consumer I would like to have the option for paginated results so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The query duration doesn\u2019t impact the performance of the frontend negatively"),Object(i.b)("li",{parentName:"ul"},"I can set the page size for large results")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a developer, I want to: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Built and reuse a single Tenure API microservice so that development efforts can be focused on other requirements"),Object(i.b)("li",{parentName:"ul"},"Ensure data updated, retrieved and inserted is consistent across services and reliable"),Object(i.b)("li",{parentName:"ul"},"Have an easy way to retrieve any data related to a Tenure so that I don\u2019t need to make additional calls to find references for related systems")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a developer I need to create an API specification so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I can help the external agency developer on quick onboarding"),Object(i.b)("li",{parentName:"ul"},"I need to be notified when errors occur and have visibility of errors (e.g logs) and issues on the API, so that I can fix them as soon as possible."),Object(i.b)("li",{parentName:"ul"},"I need to make sure that access to the API is secure so that only authorised users can make requests to this API."),Object(i.b)("li",{parentName:"ul"},"I need to know the structure and content of the entities I am exposing data for, so that I know I am meeting user needs.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a developer I need to know which data this API will be concerned with, so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Endpoints are relevant"),Object(i.b)("li",{parentName:"ul"},"I don\u2019t duplicate data provided by other platform APIs")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As an application support analyst ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"I need to understand the queries being used by the API so that I can deal with support requests accordingly and resolve the potential issues in the underlying data.")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," As a data analyst I need to connect to the API via Qlik so that: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Data is easy to interpret and available for further reporting purposes.")),Object(i.b)("h2",{id:"workshop"},"Workshop"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://ideaflip.com/b/bbc3jjr3zniq/"},"https://ideaflip.com/b/bbc3jjr3zniq/")),Object(i.b)("p",null,"Entities dependent on Tenure API:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Assets information"),Object(i.b)("li",{parentName:"ul"},"Person"),Object(i.b)("li",{parentName:"ul"},"Organisations"),Object(i.b)("li",{parentName:"ul"},"Cautionary Alerts"),Object(i.b)("li",{parentName:"ul"},"Communication details")),Object(i.b)("h2",{id:"endpoints-to-be-created-for-core-tenure-microservice"},"Endpoints to be created for core Tenure microservice"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Get Tenures:"),"\n",Object(i.b)("strong",{parentName:"p"}," Purpose: "),"  Gets one or more Tenures from the Tenure table.  Requests can be made by specifying a ref path parameter or searching for Tenures based on a series of parameters.\nEndpoint URL:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"get/tenures"),Object(i.b)("li",{parentName:"ul"},"get/tenures/?firstname"),Object(i.b)("li",{parentName:"ul"},"get/tenures/?lastname"),Object(i.b)("li",{parentName:"ul"},"get/tenures/?postcode"),Object(i.b)("li",{parentName:"ul"},"get/tenures/{tenureid}")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Request Query String parameters: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"First name - tenants first name"),Object(i.b)("li",{parentName:"ul"},"Last name - tenants last name"),Object(i.b)("li",{parentName:"ul"},"Postcode - tenants address")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Request Path Parameters: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Id - specifies the Id of a specific request record to return")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request Headers")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"ETag")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Response: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"200"),Object(i.b)("li",{parentName:"ul"},"One or more help requests")),Object(i.b)("p",null,Object(i.b)("img",{alt:"API",src:n(177).default})),Object(i.b)("p",null,"404\nIf item was not found\n",Object(i.b)("img",{alt:"API",src:n(178).default})),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"POST Tenures:")),Object(i.b)("p",null,"Purpose: Create one or more tenures"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Endpoint URL: tenures/{tenureid}\n",Object(i.b)("strong",{parentName:"li"}," Purpose: ")," Note that JigsawRef will be stored within the LegacyReferences parameter")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request object:")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'{\n  "paymentReference": "string",\n  "householdMembers": [\n    {\n      "id": "TWVoZGlLaW1ha2hlCg==",\n      "type": "person",\n      "fullName": "string",\n      "isResponsible": true,\n      "dateOfBirth": "string",\n      "personTenureType": "Tenant"\n    }\n  ],\n  "tenuredAsset": {\n    "id": "string",\n    "type": "Block",\n    "fullAddress": "string",\n    "uprn": "string"\n  },\n  "charges": {\n    "rent": 0,\n    "currentBalance": 0,\n    "billingFrequency": "string",\n    "serviceCharge": 0,\n    "otherCharges": 0,\n    "combinedServiceCharges": 0,\n    "combinedRentCharges": 0,\n    "tenancyInsuranceCharge": 0,\n    "originalRentCharge": 0,\n    "originalServiceCharge": 0\n  },\n  "startOfTenureDate": "string",\n  "endOfTenureDate": "string",\n  "tenureType": {\n    "code": "INT",\n    "description": "Introductory"\n  },\n  "tenureSource": "string",\n  "isTenanted": true,\n  "terminated": {\n    "isTerminated": false,\n    "reasonForTermination": "string"\n  },\n  "successionDate": "string",\n  "evictionDate": "string",\n  "potentialEndDate": "string",\n  "notices": [\n    {\n      "type": "Notice to quit",\n      "servedDate": "2021-03-29",\n      "expiryDate": "string",\n      "endDate": "string",\n      "effectiveDate": "string"\n    }\n  ],\n  "legacyReferences": [\n    {\n      "name": "u_saff_tenancy",\n      "value": "123456"\n    }\n  ],\n  "isMutualExchange": false,\n  "informHousingBenefitsForChanges": false,\n  "isSublet": false,\n  "subletEndDate": "string",\n  "fundingSource": "string",\n  "numberOfAdultsInProperty": 0,\n  "numberOfChildrenInProperty": 0,\n  "hasOffsiteStorage": false,\n  "furtherAccountInformation":{\n    "rentAccountRequired": false,\n    "noRentAccountReason": "string",\n    "rentLetterDate": "string",\n    "rentCardDate": "string"\n    } \n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"PATCH Tenures:")),Object(i.b)("p",null,"Purpose: Update one of more tenures\nEndpoints URL: tenures/{tenureid}"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request object:")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'{\n    "startOfTenureDate": "string",\n    "endOfTenureDate": "string",\n  "paymentReference": "string",\n    "tenureType": {\n        "code": "INT",\n        "description": "Introductory"\n    },\n  "tenureSource": "string",\n    "terminated": {\n        "isTerminated": false,\n        "reasonForTermination": "string"\n    },\n  "legacyReferences": [\n    {\n      "name": "u_saff_tenancy",\n      "value": "123456"\n    }\n  ],      \n  "fundingSource": "string",\n  "numberOfAdultsInProperty": 0,\n  "numberOfChildrenInProperty": 0,\n  "hasOffsiteStorage": false,\n  "furtherAccountInformation":{\n    "rentAccountRequired": false,\n    "noRentAccountReason": "string",\n    "rentLetterDate": "string",\n    "rentCardDate": "string"\n    } \n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request Headers")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"ifMatch")),Object(i.b)("p",null,"Purpose: Add a person to a tenure"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Endpoint URL: tenures/{tenureid}/person/{personid}")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request object:")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'{\n    "type": "Person",\n    "fullName": "Person Full Name",\n    "isResponsible": true,\n    "dateOfBirth": "1951-02-11T00:00:00",\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"DELETE Tenures:")),Object(i.b)("p",null,"Purpose: Remove a person from tenure"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Endpoint URL: tenures/{tenureid}/person/{personid}")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Response: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"201\n",Object(i.b)("img",{alt:"API",src:n(179).default}))),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Response: ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"204"),Object(i.b)("li",{parentName:"ul"},"Tenure Updated")),Object(i.b)("p",null,"404\nNot found\n",Object(i.b)("img",{alt:"API",src:n(180).default})),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Payload: ")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," Swagger: ")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"}," What type of documents do we collect as part of the tenure entity? ")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Document issue -  which is the process of success/fail prior to application"),Object(i.b)("li",{parentName:"ul"},"Tenure Application details"),Object(i.b)("li",{parentName:"ul"},"List of invoices (link to invoice ID)"),Object(i.b)("li",{parentName:"ul"},"Tenure agreements ")))}b.isMDXComponent=!0},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),b=u(n),d=r,m=b["".concat(s,".").concat(d)]||b[d]||p[d]||i;return n?a.a.createElement(m,c(c({ref:t},l),{},{components:n})):a.a.createElement(m,c({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=d;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var l=2;l<i;l++)s[l]=n[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);