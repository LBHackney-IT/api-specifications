(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{124:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/spec3-630979adc87de11a500099722b3a3e48.png"},162:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/spec1-aa6a1cf29fda7ea91fc2dbd5a6289c44.png"},163:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/spec2-4e382d6d060aea72be98f7e2d4810657.png"},164:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/spec4-d6b6f635969f227196f846af771ea998.png"},165:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/spec5-bd86b4ec4310a524717a785607a3c603.png"},73:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(3),i=a(7),r=(a(0),a(92)),s=["components"],o={id:"activities_api",title:"Activities API"},l={unversionedId:"activities_api",id:"activities_api",isDocsHomePage:!1,title:"Activities API",description:"Purpose:",source:"@site/docs/activities_api.md",slug:"/activities_api",permalink:"/api-specifications/activities_api",editUrl:"https://github.com/LBHackney-IT/api-specifications/edit/master/docs/activities_api.md",version:"current",sidebar:"docs",previous:{title:"Assessment Process",permalink:"/api-specifications/assessment_process"},next:{title:"Asset Information API",permalink:"/api-specifications/"}},c=[{value:"Purpose:",id:"purpose",children:[]},{value:"Vision",id:"vision",children:[]},{value:"Our users and their needs",id:"our-users-and-their-needs",children:[]},{value:"Workshop 1",id:"workshop-1",children:[]},{value:"Benefits of centralised Activities repository",id:"benefits-of-centralised-activities-repository",children:[]},{value:"Endpoints to be created",id:"endpoints-to-be-created",children:[]},{value:"Post Activities",id:"post-activities",children:[]},{value:"Example Payload",id:"example-payload",children:[]}],p={toc:c};function b(e){var t=e.components,o=Object(i.a)(e,s);return Object(r.b)("wrapper",Object(n.a)({},p,o,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"purpose"},"Purpose:"),Object(r.b)("p",null,"To identify all information to be captured with regards to the Activities(Record logging) domain.\nAs one of the core entities for all interactions with the council, we understand that the Activities is an entity which is common between all three streams (Finance, Tenants & Leaseholders,Repairs) of MTHF and possibly other datasets as well as it is only meant to log all activities against the entity in need."),Object(r.b)("p",null,"As part of our solution, we are proposing to develop the first version of this API as a pilot. This will help to target services more effectively, achieve better outcomes and enhance performance monitoring while reducing cost and risk. This means that we can offer a deeper, more self-service capability, enabling even more service transactions to be carried out online."),Object(r.b)("p",null,"Our goal is to ensure we build reusable components as part of the MFTH stream and thereby extending to other domains if they need similar information. This will enable us to eliminate the silos mechanism for asset information collection and help us to present a single view on it which will also help us to reduce the future development cost and yield a better ROI."),Object(r.b)("h2",{id:"vision"},"Vision"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A single, centralized data source, holding all activities data, updated by multiple services."),Object(r.b)("li",{parentName:"ul"},"A reusable microservice API used for managing that data."),Object(r.b)("li",{parentName:"ul"},"Single data source to identify all activities related to different domains such as Housing etc to avoid any duplication of data,a normalised view and consistency across the board.")),Object(r.b)("h2",{id:"our-users-and-their-needs"},"Our users and their needs"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"As a service user I would like to see the Activities so that: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"I can see my rent being charged"),Object(r.b)("li",{parentName:"ul"},"I can see my housing benefits"),Object(r.b)("li",{parentName:"ul"},"I can see payments which have previously been made"),Object(r.b)("li",{parentName:"ul"},"I can see account adjustments ( e.g cancellation of service)"),Object(r.b)("li",{parentName:"ul"},"I can be provided with recharge repairs details, billing and payment details")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," As a leasehold/shareholder  service user I would like to see Activities so that: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"I can see my estimated service charge"),Object(r.b)("li",{parentName:"ul"},"I can my balancing charge"),Object(r.b)("li",{parentName:"ul"},"I can see payments which have previously been made"),Object(r.b)("li",{parentName:"ul"},"I can see account adjustments"),Object(r.b)("li",{parentName:"ul"},"I can see if I have a major works accounts and complete transactions if needed"),Object(r.b)("li",{parentName:"ul"},"I can be provided with recharge repairs details,  billing and payment details")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," As a consumer I need to have an API specification (e.g. Swagger doc, README), so that: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"I can have a clear understanding of the endpoints which are available"),Object(r.b)("li",{parentName:"ul"},"I know what the requests and responses should look like"),Object(r.b)("li",{parentName:"ul"},"I need to be able to query for an individual activity record or list of activities so that\nI can use the information as per the service need in question"),Object(r.b)("li",{parentName:"ul"},"I would like to have the option for paginated results so that\nthe query duration doesn\u2019t impact the performance of the frontend negatively."),Object(r.b)("li",{parentName:"ul"},"I can set the page size for large results.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," As a developer I need to create an API specification so that: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"I can provide clear documentation about endpoints and payloads, etc."),Object(r.b)("li",{parentName:"ul"},"I can help the external agency developer on quick onboarding."),Object(r.b)("li",{parentName:"ul"},"I need to be notified when errors occur and have visibility of errors (e.g logs) and issues on the API, so that I can fix them as soon as possible."),Object(r.b)("li",{parentName:"ul"},"I need to make sure that access to the API is secure via tokens so that only authorised users can make requests to this API."),Object(r.b)("li",{parentName:"ul"},"I need to know the structure and content of the entities I am exposing data for, so that I know I am meeting user needs."),Object(r.b)("li",{parentName:"ul"},"I need to know which data this API will be concerned with, so that\nendpoints are relevant;"),Object(r.b)("li",{parentName:"ul"},"I don\u2019t duplicate data provided by other platform APIs.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," As an application  support analyst: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"I need to understand the queries being used by the API so that I can deal with support requests accordingly and resolve the potential issues in the underlying data.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," As a data analyst I need to connect to the API via Qlik so that: ")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"data is easy to interpret and available for further reporting purposes.")),Object(r.b)("h1",{id:"workshop-outcome"},"Workshop outcome"),Object(r.b)("h2",{id:"workshop-1"},"Workshop 1"),Object(r.b)("p",null,"Summary"),Object(r.b)("p",null,"The workshop was based on identifying different sources that might contribute towards the Activities API. As activities are not representing the complete history against the entity and each dataset has their own wrapper around the activities model it will be best if we have a single repository to handle all activities with filters based on the domain and entities we are dealing with."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," ",Object(r.b)("a",{parentName:"strong",href:"https://ideaflip.com/b/5xu3waqetkxg/"},"https://ideaflip.com/b/5xu3waqetkxg/")," ")),Object(r.b)("h2",{id:"benefits-of-centralised-activities-repository"},"Benefits of centralised Activities repository"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Single view of all Activities"),Object(r.b)("li",{parentName:"ol"},"Activities model"),Object(r.b)("li",{parentName:"ol"},"Better organisation of data"),Object(r.b)("li",{parentName:"ol"},"Improve analysis"),Object(r.b)("li",{parentName:"ol"},"Quick troubleshooting")),Object(r.b)("h2",{id:"endpoints-to-be-created"},"Endpoints to be created"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," Get Activities ")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"}," Purpose: ")," Gets one or more Activities. Requests can be made by specifying a ref path parameter or searching for properties based on a series of parameters."),Object(r.b)("p",null,"Endpoint URL:\nget/activities"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"              get/activities/{id}\n\n              get/activities/?Author_ID=TWVoZGlLaW1ha2hlCg==\n\n              Method: GET (list, search, view)\n")),Object(r.b)("p",null,"Request Querystring Parameters:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Author - specifies the author of the notes"),Object(r.b)("li",{parentName:"ul"},"Author ID"),Object(r.b)("li",{parentName:"ul"},"Author full name"),Object(r.b)("li",{parentName:"ul"},"Author email"),Object(r.b)("li",{parentName:"ul"},"Request Path Parameter:"),Object(r.b)("li",{parentName:"ul"},"Id - specifies the Id of a specific help request record to return"),Object(r.b)("li",{parentName:"ul"},"Response:"),Object(r.b)("li",{parentName:"ul"},"200"),Object(r.b)("li",{parentName:"ul"},"One or more activity\n",Object(r.b)("img",{alt:"API ",src:a(162).default}))),Object(r.b)("p",null,"404\nIf item was not found"),Object(r.b)("p",null,Object(r.b)("img",{alt:"API",src:a(163).default})),Object(r.b)("h2",{id:"post-activities"},"Post Activities"),Object(r.b)("p",null,"Purpose: Creates one or more Activities.\nEndpoint URL: activities/"),Object(r.b)("p",null,"Method: Post\nRequest post object:\nActivities object: Json object of the activities details e.g."),Object(r.b)("p",null,Object(r.b)("img",{alt:"API",src:a(124).default})),Object(r.b)("p",null,"Response:\n201\nActivities created\n",Object(r.b)("img",{alt:"API",src:a(124).default}),"\n}"),Object(r.b)("p",null,"400\nBad request"),Object(r.b)("p",null,Object(r.b)("img",{alt:"API",src:a(164).default})),Object(r.b)("p",null,"500\nInternal Server Error\n",Object(r.b)("img",{alt:"API",src:a(165).default})),Object(r.b)("h2",{id:"example-payload"},"Example Payload"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'      {\n      "id": "6f22e9ae3e8a4e0eaf46db02eb87f8e6",\n      "type": "create|update",\n      "target type": "person|asset|tenure....",\n      "target id": "TWVoZGlLaW1ha2hlCg==",\n      "datetime": "2021-02-19 15:12:00",\n      "time to live for the record": \u201c365 days\u201d,\n\n      //if we want to store data\n      "old data": {\n      "id": "TWVoZGlLaW1ha2hlCg==",\n      "title": "Mr",\n      "forename": "M",\n      "middle name": "",\n      "surname": "K",\n      ...\n      },\n      "new data": {\n      "id": "TWVoZGlLaW1ha2hlCg==",\n      "title": "Mr",\n      "forename": "Mehdi",\n      "middle name": "",\n      "surname": "Kimakhe",\n      ...\n      },\n\n        "Author": {\n      "id": "TWVoZGlLaW1ha2hlCg==",\n      "full name": "Mehdi Kimakhe",\n      "email": "mehdi.kimakhe@hackney.gov.uk"\n      }\n      }\n')))}b.isMDXComponent=!0},92:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),p=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},b=function(e){var t=p(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=p(a),d=n,h=b["".concat(s,".").concat(d)]||b[d]||u[d]||r;return a?i.a.createElement(h,o(o({ref:t},c),{},{components:a})):i.a.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,s[1]=o;for(var c=2;c<r;c++)s[c]=a[c];return i.a.createElement.apply(null,s)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);