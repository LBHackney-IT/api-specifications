<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/api-specifications/blog/rss.xml" title="Hackney API Specifications Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/api-specifications/blog/atom.xml" title="Hackney API Specifications Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney API Specifications" href="/api-specifications/opensearch.xml"><title data-react-helmet="true">Housing Search API | Hackney API Specifications</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Housing Search API | Hackney API Specifications"><meta data-react-helmet="true" name="description" content="Purpose"><meta data-react-helmet="true" property="og:description" content="Purpose"><meta data-react-helmet="true" property="og:url" content="https://lbhackney-it.github.io/api-specifications/api-specifications/housing_search"><link data-react-helmet="true" rel="shortcut icon" href="/api-specifications/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://lbhackney-it.github.io/api-specifications/api-specifications/housing_search"><link rel="stylesheet" href="/api-specifications/styles.cd915cb9.css">
<link rel="stylesheet" href="/api-specifications/main.4a16e2e4.css">
<link rel="preload" href="/api-specifications/styles.9b1e01e2.js" as="script">
<link rel="preload" href="/api-specifications/runtime~main.a121d928.js" as="script">
<link rel="preload" href="/api-specifications/main.51b115f9.js" as="script">
<link rel="preload" href="/api-specifications/1.8ee861b6.js" as="script">
<link rel="preload" href="/api-specifications/2.f4f51dbb.js" as="script">
<link rel="preload" href="/api-specifications/26.4fc2d966.js" as="script">
<link rel="preload" href="/api-specifications/29.53b2fd4c.js" as="script">
<link rel="preload" href="/api-specifications/935f2afb.bf74d2b3.js" as="script">
<link rel="preload" href="/api-specifications/17896441.5b7b55dd.js" as="script">
<link rel="preload" href="/api-specifications/936b808a.f6f13a65.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/api-specifications/"><img src="/api-specifications/img/logo-long.svg" alt="API Specifications" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/api-specifications/img/logo-long.svg" alt="API Specifications" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Specifications</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/api-specifications" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/api-specifications/"><img src="/api-specifications/img/logo-long.svg" alt="API Specifications" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/api-specifications/img/logo-long.svg" alt="API Specifications" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">API Specifications</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/api-specifications" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Home</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api-specifications/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api-specifications/assessment_process">Assessment Process</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Specifications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/activities_api">Activity History API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/asset_info">Asset Information API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/contact_details">Contact Details API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/api-specifications/housing_search">Housing Search API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/notes">Notes API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/organisations">Organisations API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/person-api">Person API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/search_api">Search API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/tenure_api">Tenure API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/accounts-api">Accounts API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/notifications-api">Notifications API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/patches-api">Patches API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/equality-information-api">Equality Information API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/api-specifications/processes-api">Processes API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contact Us</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api-specifications/contact_us">Contact Our Development Team</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Housing Search API</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="purpose"></a>Purpose<a class="hash-link" href="#purpose" title="Direct link to heading">#</a></h2><p>To define how a new proposed search service will work. The microservice will be reusable across different housing services and will provide searching functionality for both people and properties. The service will make use of ElasticSearch as a search engine (for performance benefits and to support free-text and fuzzy search) and will aggregate assets and people data for ease of search purposes.</p><p>ElasticSearchâ€™s data store will be updated at real time - this will be implemented using event driven architecture, where each microservice serving a specific data domain will create an event each time new data is added or updated.</p><p>ElasticSearch will be updated by a Lambda function, holding business logic, that has subscribed to events and thus will have data kept up-to-date in real time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="vision"></a>Vision<a class="hash-link" href="#vision" title="Direct link to heading">#</a></h2><ul><li>A reliable and efficient search service, that allows for free-text and fuzzy search for people and properties.</li><li>A microservice that does not impact user experience with poor performance related to searching data from multiple data domains.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="user-needs"></a>User Needs<a class="hash-link" href="#user-needs" title="Direct link to heading">#</a></h2><p><strong> As a service: </strong></p><ul><li>I want the ability to view the details of the results returned in a search</li><li>So that I can easily look through the different results and make the correct selection and proceed to the profile that I was looking for</li></ul><p><strong> As a TA officer: </strong></p><ul><li>I want the ability to filter the details of the results returned in an asset search</li><li>So that I can easily look through the different results and find accommodation matching my requirements</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="searching"></a>Searching<a class="hash-link" href="#searching" title="Direct link to heading">#</a></h3><p>Searching is achieved by providing <code>searchText</code> as a string parameter.</p><p><strong>Search by :</strong></p><ol><li>Person - First name, Middle name, Last name</li><li>Asset - Address line 1, Postcode, Asset type</li><li>Tenure - Payment Reference, FullAddress of TenuredAsset , Household Members FullName  </li><li>Transactions - Sender name, Transaction Type, Payment Reference, Bank Account Number, Transaction Date, Transaction Amount  </li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="filtering"></a>Filtering<a class="hash-link" href="#filtering" title="Direct link to heading">#</a></h3><p>Filter parameters will be added to
<code>/search/assets/all</code> and searchText will be optional giving the ability to filter of specific fields without the need to search by text.
We propose to enforce a rule of at least one parameter to mitigate against the API being abused and returning every asset.</p><p><strong>Filter by :</strong> </p><ol><li>Asset - assetStatus, numberOfBedrooms, numberOfBedSpaces, numberOfCots, groundFloor, privateBathroom, privateKitchen, stepFree, isTemporaryAccomodation, parentAssetId</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="considerations"></a>Considerations<a class="hash-link" href="#considerations" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="transactions"></a>Transactions<a class="hash-link" href="#transactions" title="Direct link to heading">#</a></h4><ul><li>The search must be flexible enough to allow for the successful finding of information without assuming the form of the query. An officer may know the PRN, or the address, or just the sender name.</li><li>A result should act as a navigation tool to deeper more meaningful information.</li><li>Search will most likely be the first thing a user does in order to find information.</li><li>Search should be available for any data set (property, transaction, document).</li><li>Bank account search should be available for transactions so that if this is the form of the query (a resident has phoned in and asked why their payment has gone missing) then the officer can find the payment in either &#x27;all transactions&#x27; or &#x27;suspense account&#x27; sections. The bank account data coming from Civica / Cedar may already be redacted. In which case, the last 3-4 digits of the account number should be searchable.</li><li>The name linked to the transaction is the name linked to the account of the sender. This could be a person or a company.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="api-specification"></a>API Specification<a class="hash-link" href="#api-specification" title="Direct link to heading">#</a></h2><p><a href="https://app.swaggerhub.com/apis/Hackney/housingSearchApi/1.0.0" target="_blank" rel="noopener noreferrer">https://app.swaggerhub.com/apis/Hackney/housingSearchApi/1.0.0</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="architecture-diagram"></a>Architecture diagram<a class="hash-link" href="#architecture-diagram" title="Direct link to heading">#</a></h2><p><a href="https://drive.google.com/file/d/1UYnYkGrOn83KXZgoCcVwb8tVg5MNehRz/view" target="_blank" rel="noopener noreferrer">https://drive.google.com/file/d/1UYnYkGrOn83KXZgoCcVwb8tVg5MNehRz/view</a></p><p>The search indexes will be kept in sync via events. In particular there will be a listener per each search index which will subscribe to the relevant publishers.
Benefits of having an event driven architecture</p><ul><li>Scalability :</li><li>Flexible approach:</li><li>Fault Tolerance :</li><li>Durability:</li><li>Event flow tracking</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="benefits-of-using-elasticsearch-and-indexes"></a>Benefits of using ElasticSearch and indexes<a class="hash-link" href="#benefits-of-using-elasticsearch-and-indexes" title="Direct link to heading">#</a></h2><p>Allows to search on fields which do not exist only on platform APIs. It allows to do aggregate searches without dependencies which means it is adaptable for any services wishes to use. Major advantage is that it provides huge improvements on performance of these search queries.These are other benefits offered by Elastic search are as follows</p><ol><li>Easy Filtering</li><li>Advanced searches</li><li>Better performance for read queries.</li><li>Drives distributed architecture</li><li>Schema free</li><li>High Scalable</li></ol><p><strong> Dependencies : </strong></p><ul><li>By person</li><li>Person Information</li><li>Tenure</li><li>Asset Information</li><li>Transactions</li><li>Alerts</li></ul><p><strong> By Asset </strong></p><ul><li>Asset Information</li><li>Tenure</li><li>Alert</li></ul><p><strong> By Tenure </strong></p><ul><li>Tenure</li><li>Person Information</li><li>Alert</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="workshop-26042022"></a>Workshop 26/04/2022<a class="hash-link" href="#workshop-26042022" title="Direct link to heading">#</a></h3><p>We discussed the need for filter parameters without searchText so that we can refine lists based purely on the filter params.
It was decided to use the <code>/search/assets/all</code> to produce this outcome.
Reference doc can be found <a href="https://docs.google.com/document/d/1ZMa2dKqV5XfgFiyA0RL9hCqy1QLoo53VnOJPpGxQA_s/edit#heading=h.dx6cih64yr6k" target="_blank" rel="noopener noreferrer">here</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/api-specifications/edit/master/docs/housing_search.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/api-specifications/contact_details"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Contact Details API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/api-specifications/notes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Notes API Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link">Purpose</a></li><li><a href="#vision" class="table-of-contents__link">Vision</a></li><li><a href="#user-needs" class="table-of-contents__link">User Needs</a><ul><li><a href="#searching" class="table-of-contents__link">Searching</a></li><li><a href="#filtering" class="table-of-contents__link">Filtering</a></li><li><a href="#considerations" class="table-of-contents__link">Considerations</a></li></ul></li><li><a href="#api-specification" class="table-of-contents__link">API Specification</a></li><li><a href="#architecture-diagram" class="table-of-contents__link">Architecture diagram</a></li><li><a href="#benefits-of-using-elasticsearch-and-indexes" class="table-of-contents__link">Benefits of using ElasticSearch and indexes</a><ul><li><a href="#workshop-26042022" class="table-of-contents__link">Workshop 26/04/2022</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/api-specifications/styles.9b1e01e2.js"></script>
<script src="/api-specifications/runtime~main.a121d928.js"></script>
<script src="/api-specifications/main.51b115f9.js"></script>
<script src="/api-specifications/1.8ee861b6.js"></script>
<script src="/api-specifications/2.f4f51dbb.js"></script>
<script src="/api-specifications/26.4fc2d966.js"></script>
<script src="/api-specifications/29.53b2fd4c.js"></script>
<script src="/api-specifications/935f2afb.bf74d2b3.js"></script>
<script src="/api-specifications/17896441.5b7b55dd.js"></script>
<script src="/api-specifications/936b808a.f6f13a65.js"></script>
</body>
</html>